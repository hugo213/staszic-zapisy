{% extends "base.html" %}
{% block title %}Imię Nazwisko{% endblock title %}
{% block scripts %}
{{ super () }}
<script>
    var meetings = [
        {% for r in rozklad %}
    {'start': new Date("{{r.start}}"), 'end': new Date("{{r.koniec}}"), 'free': {{r.wolne|lower}} },
    {% endfor %}
    ]
</script>
<script>
    var selected_meeting = null;

    function time(date) {
        return date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }

    function expand_meeting(mid) {
        selected_meeting = mid;
        console.log(mid);
        $('#start').html(time(meetings[selected_meeting].start));
        $('#end').html(time(meetings[selected_meeting].end));
        $('#details').css('display', 'block');
    }
    function collapse_meeting() {

    }
    //$('body').onload
</script>
{% endblock scripts %}
{% block content %}
<br>
<div class="row">
    <div class="col s12">
        <div class="card white">
            <div class="card-content grey-text text-darken-2 container">
                <div class="row">
                    Wybierz odpowiadającą Ci godzinę spotkania.
                </div>
                <div class="row">
                    {% for r in rozklad %}
                        <div class="col s2">
                            <a id="meeting{{loop.index0}}" class="btn waves-effect waves-light meeting_header" onclick="expand_meeting({{loop.index0}})" href="#details">
                                {{r.start.strftime('%H:%M')}}
                            </a>
                        </div>
                        {% if loop.index % 6 == 0 and not loop.last %}</div><div class="row">{% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" id="details" style="display: none;">
    <div class="col s12">
        <div class="card white">
            <form id="meeting_form" action="" method="post">
                <input id="meeting_id" type="hidden" value="0"/>
                <div class="card-content grey-text text-darken-2 container">
                    <div class="row">
                        <div class="col s6">
                            <div id="teacher">{{imie}} {{nazwisko}}</div>
                            <label for="teacher">Nauczyciel <a href="/"><small>(zmień)</small></a></label>
                        </div>
                        <div class="col s2">
                            <div id="date">{{ rozklad[0].start.strftime('%d.%m.%Y') }}</div>
                            <label for="date">Data</label>
                        </div>
                        <div class="col s2">
                            <div id="start">00:00</div>
                            <label for="start">Od</label>
                        </div>
                        <div class="col s2">
                            <div id="end">00:00</div>
                            <label for="end">Do</label>
                        </div>
                        <div class="col s1">

                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6">
                            <input id="fname" type="text"/>
                            <label for="fname">Imię ucznia</label>
                        </div>
                        <div class="col s6">
                            <input id="lname" type="text"/>
                            <label for="lname">Nazwisko ucznia</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6">
                            <input id="email" class="validate" type="email"/>
                            <label for="email">Adres e-mail rodzica</label>
                        </div>
                        <div class="col s6">
                            <label>
                                <input id="rodo" type="checkbox"/>
                                <span><small>Wyrażam zgode blablabla</small></span>
                            </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12" style="text-align: right">
                            <button class="btn waves-effect waves-light" type="submit">Zarezerwuj
                                <i class="material-icons right">send</i>
                            </button>

                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}}